!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tinybind=t():e.tinybind=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isJson=u,t.parseType=function(e){var t=i,n=e;o.test(e)?n=e.slice(1,-1):"true"===e?n=!0:"false"===e?n=!1:"null"===e?n=null:"undefined"===e?n=void 0:isNaN(e)?u(e)?n=JSON.parse(e):t=r:n=Number(e);return{type:t,value:n}},t.parseTemplate=function(e,t){var n,i=e.length,r=0,o=0,u=t[0],c=t[1];for(;o<i;){if((r=e.indexOf(u,o))<0){n&&n.push({type:s,value:e.slice(o)});break}if(n=n||[],r>0&&o<r&&n.push({type:s,value:e.slice(o,r)}),o=r+u.length,(r=e.indexOf(c,o))<0){var l=e.slice(o-c.length),f=n[n.length-1];f&&f.type===s?f.value+=l:n.push({type:s,value:l});break}var h=e.slice(o,r).trim();n.push({type:a,value:h}),o=r+c.length}return n};var i=0,r=1,o=/^'.*'$|^".*"$/,s=0,a=1;function u(e){try{var t=JSON.parse(e);return t instanceof Array||t instanceof Object}catch(e){return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(5),r=n(0),o={binders:{},components:{},formatters:{},adapters:{},_prefix:"rv",_fullPrefix:"rv-",get prefix(){return this._prefix},set prefix(e){this._prefix=e,this._fullPrefix=e+"-"},parseTemplate:r.parseTemplate,parseType:r.parseType,templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){this.call(e,t,n.view.models)},fallbackBinder:function(e,t){null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},configure:function(e){var t=this;e&&Object.keys(e).forEach(function(n){var r=e[n];i.EXTENSIONS.indexOf(n)>-1?Object.keys(r).forEach(function(e){t[n][e]=r[e]}):t[n]=r})}};t.default=o},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"object"===i(e)&&null!==e}function o(e,t,n){this.keypath=t,this.callback=n,this.objectPath=[],this.parse(),this.obj=this.getRootObject(e),r(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=o,window.adapters,window.interfaces,window.rootInterface,o.updateOptions=function(e){window.adapters=e.adapters,window.interfaces=Object.keys(adapters),window.rootInterface=e.rootInterface},o.tokenize=function(e,t){var n,i,r=[],o={i:t,path:""};for(n=0;n<e.length;n++)i=e.charAt(n),~interfaces.indexOf(i)?(r.push(o),o={i:i,path:""}):o.path+=i;return r.push(o),r},o.prototype.parse=function(){var e,t;window.interfaces.length||function(e){throw new Error("[Observer] "+e)}("Must define at least one adapter interface."),~window.interfaces.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):(t=window.rootInterface,e=this.keypath),this.tokens=o.tokenize(e,t),this.key=this.tokens.pop()},o.prototype.realize=function(){for(var e,t,n=this.obj,i=-1,o=0;o<this.tokens.length;o++)t=this.tokens[o],r(n)?(void 0!==this.objectPath[o]?n!==(e=this.objectPath[o])&&(this.set(!1,t,e,this),this.set(!0,t,n,this),this.objectPath[o]=n):(this.set(!0,t,n,this),this.objectPath[o]=n),n=this.get(t,n)):(-1===i&&(i=o),(e=this.objectPath[o])&&this.set(!1,t,e,this));return-1!==i&&this.objectPath.splice(i),n},o.prototype.sync=function(){var e,t,n;(e=this.realize())!==this.target?(r(this.target)&&this.set(!1,this.key,this.target,this.callback),r(e)&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,((n=this.value())!==t||n instanceof Function)&&this.callback.sync()):e instanceof Array&&this.callback.sync()},o.prototype.value=function(){if(r(this.target))return this.get(this.key,this.target)},o.prototype.setValue=function(e){r(this.target)&&adapters[this.key.i].set(this.target,this.key.path,e)},o.prototype.get=function(e,t){return console.log,adapters[e.i].get(t,e.path)},o.prototype.set=function(e,t,n,i){console.log("set ",e,t,n);var r=e?"observe":"unobserve";adapters[t.i][r](n,t.path,i)},o.prototype.unobserve=function(){for(var e,t,n=0;n<this.tokens.length;n++)t=this.tokens[n],(e=this.objectPath[n])&&this.set(!1,t,e,this);r(this.target)&&this.set(!1,this.key,this.target,this.callback)},o.prototype.getRootObject=function(e){var t,n;if(!e.$parent)return e;for(t=this.tokens.length?this.tokens[0].path:this.key.path,n=e;n.$parent&&void 0===n[t];)n=n.$parent;return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var i=n(0),r=n(2);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g,u=/\s+/,c=function(){function e(t,n,i,r,o,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.el=n,this.type=i,this.keypath=r,this.binder=o,this.args=s,this.formatters=a,this.formatterObservers={},this.model=void 0}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"observe",value:function(e,t){return new r.Observer(e,t,this)}},{key:"parseTarget",value:function(){if(this.keypath){var e=(0,i.parseType)(this.keypath);if(0===e.type)this.value=e.value;else{if(1!==e.type)throw new Error("Unknown type in token",e);this.observer=this.observe(this.view.models,this.keypath),this.model=this.observer.target}}else this.value=void 0}},{key:"getIterationAlias",value:function(e){return"%"+e+"%"}},{key:"parseFormatterArguments",value:function(e,t){var n=this;return e.map(i.parseType).map(function(e,i){var r=e.type,o=e.value;if(0===r)return o;if(1===r){n.formatterObservers[t]||(n.formatterObservers[t]={});var s=n.formatterObservers[t][i];return s||(s=n.observe(n.view.models,o),n.formatterObservers[t][i]=s),s.value()}throw new Error("Unknown type",r,o)})}},{key:"formattedValue",value:function(e){var t=this;return this.formatters.reduce(function(e,n,i){var r=n.match(a),s=r.shift(),u=t.view.options.formatters[s],c=t.parseFormatterArguments(r,i);return u&&u.read instanceof Function?e=u.read.apply(u,[e].concat(o(c))):u instanceof Function&&(e=u.apply(void 0,[e].concat(o(c)))),e},e)}},{key:"eventHandler",value:function(e){var t=this,n=t.view.options.handler;return function(i){n.call(e,this,i,t)}}},{key:"set",value:function(e){e=e instanceof Function&&!this.binder.function?this.formattedValue(e.call(this.model)):this.formattedValue(e);var t=this.binder.routine||this.binder;t instanceof Function&&t.call(this,this.el,e)}},{key:"sync",value:function(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)}},{key:"publish",value:function(){var e=this;if(this.observer){var t=this.formatters.reduceRight(function(t,n,i){var r=n.split(u),s=r.shift(),a=e.view.options.formatters[s],c=e.parseFormatterArguments(r,i);return a&&a.publish&&(t=a.publish.apply(a,[t].concat(o(c)))),t},this.getValue(this.el));this.observer.setValue(t)}}},{key:"bind",value:function(){this.parseTarget(),this.binder.hasOwnProperty("bind")&&this.binder.bind.call(this,this.el),this.view.options.preloadData&&this.sync()}},{key:"unbind",value:function(){var e=this;this.binder.unbind&&this.binder.unbind.call(this,this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach(function(t){var n=e.formatterObservers[t];Object.keys(n).forEach(function(e){n[e].unobserve()})}),this.formatterObservers={}}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.observer&&(this.model=this.observer.target),this.binder.update&&this.binder.update.call(this,e)}},{key:"getValue",value:function(e){return this.binder&&this.binder.getValue?this.binder.getValue.call(this,e):function(e){var t=[];return"checkbox"===e.type?e.checked:"select-multiple"===e.type?(e.options.forEach(function(e){e.selected&&t.push(e.value)}),t):e.value}(e)}}]),e}();t.Binding=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),r=n(3),o=n(8),s=n(0);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u={routine:function(e,t){e.data=null!=t?t:""}},c=/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g,l=function e(t,n){var r=!1;if(3===n.nodeType){var o=(0,s.parseTemplate)(n.data,i.default.templateDelimiters);if(o){for(var a=0;a<o.length;a++){var c=o[a],l=document.createTextNode(c.value);n.parentNode.insertBefore(l,n),1===c.type&&t.buildBinding(l,null,c.value,u,null)}n.parentNode.removeChild(n)}r=!0}else 1===n.nodeType&&(r=t.traverse(n));if(!r)for(var f=0;f<n.childNodes.length;f++)e(t,n.childNodes[f])},f=function(e,t){var n=e.binder&&e.binder.priority||0;return(t.binder&&t.binder.priority||0)-n},h=function(e){return e.trim()},d=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.jquery||t instanceof Array?this.els=t:this.els=[t],this.models=n,this.options=i,this.build()}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"buildBinding",value:function(e,t,n,i,o){var s=n.match(c).map(h),a=s.shift();this.bindings.push(new r.Binding(this,e,t,a,i,o,s))}},{key:"build",value:function(){this.bindings=[];var e,t,n=this.els;for(e=0,t=n.length;e<t;e++)l(this,n[e]);this.bindings.sort(f)}},{key:"traverse",value:function(e){for(var t,n,r,s,a=i.default._fullPrefix,u="SCRIPT"===e.nodeName||"STYLE"===e.nodeName,c=e.attributes,l=[],f=this.options.starBinders,h=0,d=c.length;h<d;h++){var p=c[h];if(0===p.name.indexOf(a)){if(t=p.name.slice(a.length),s=[],!(n=this.options.binders[t]))for(var v=0;v<f.length;v++)if(r=f[v],t.slice(0,r.length-1)===r.slice(0,-1)){n=this.options.binders[r],s.push(t.slice(r.length-1));break}if(n||(n=i.default.fallbackBinder),n.block)return this.buildBinding(e,t,p.value,n,s),e.removeAttribute(p.name),!0;l.push({attr:p,binder:n,type:t,args:s})}}for(var b=0;b<l.length;b++){var y=l[b];this.buildBinding(e,y.type,y.attr.value,y.binder,y.args),e.removeAttribute(y.attr.name)}return u||(t=e.nodeName.toLowerCase(),this.options.components[t]&&!e._bound&&(this.bindings.push(new o.ComponentBinding(this,e,t)),u=!0)),u}},{key:"bind",value:function(){this.bindings.forEach(function(e){e.bind()})}},{key:"unbind",value:function(){Array.isArray(this.bindings)&&this.bindings.forEach(function(e){e.unbind()}),this.componentView&&this.componentView.unbind()}},{key:"sync",value:function(){this.bindings.forEach(function(e){e.sync()})}},{key:"publish",value:function(){this.bindings.forEach(function(e){e.binder&&e.binder.publishes&&e.publish()})}},{key:"update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(n){e.models[n]=t[n]}),this.bindings.forEach(function(e){e.update&&e.update(t)})}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENSIONS=t.OPTIONS=void 0;t.OPTIONS=["prefix","templateDelimiters","rootInterface","preloadData","handler"];t.EXTENSIONS=["binders","formatters","components","adapters"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(4));var r=function(e){return null!=e?e.toString():void 0};function o(e,t,n){var r=e.el.cloneNode(!0),o=new i.default(r,t,e.view.options);return o.bind(),e.marker.parentNode.insertBefore(r,n),o}var s={"on-*":{function:!0,priority:1e3,unbind:function(e){this.handler&&e.removeEventListener(this.args[0],this.handler)},routine:function(e,t){this.handler&&e.removeEventListener(this.args[0],this.handler),this.handler=this.eventHandler(t),e.addEventListener(this.args[0],this.handler)}},"each-*":{block:!0,priority:4e3,bind:function(e){this.marker?this.iterated.forEach(function(e){e.bind()}):(this.marker=document.createComment(" tinybind: ".concat(this.type," ")),this.iterated=[],e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e))},unbind:function(e){this.iterated&&this.iterated.forEach(function(e){e.unbind()})},routine:function(e,t){var n=this,i=this.args[0];if(t=t||[],!Array.isArray(t))throw new Error("each-"+i+" needs an array to iterate over, but it is",t);var r=e.getAttribute("index-property")||this.getIterationAlias(i);t.forEach(function(e,t){var s={$parent:n.view.models};s[r]=t,s[i]=e;var a=n.iterated[t];if(a)if(a.models[i]!==e){for(var u,c,l=t+1;l<n.iterated.length;l++)if((c=n.iterated[l]).models[i]===e){u=l;break}void 0!==u?(n.iterated.splice(u,1),n.marker.parentNode.insertBefore(c.els[0],a.els[0]),c.models[r]=t):c=o(n,s,a.els[0]),n.iterated.splice(t,0,c)}else a.models[r]=t;else{var f=n.marker;n.iterated.length&&(f=n.iterated[n.iterated.length-1].els[0]),a=o(n,s,f.nextSibling),n.iterated.push(a)}}),this.iterated.length>t.length&&function(e,t){for(var n=0;n<e;n++)t()}(this.iterated.length-t.length,function(){var e=n.iterated.pop();e.unbind(),n.marker.parentNode.removeChild(e.els[0])}),"OPTION"===e.nodeName&&this.view.bindings.forEach(function(e){e.el===n.marker.parentNode&&"value"===e.type&&e.sync()})},update:function(e){var t=this,n={};Object.keys(e).forEach(function(i){i!==t.args[0]&&(n[i]=e[i])}),this.iterated.forEach(function(e){e.update(n)})}},"class-*":function(e,t){var n=" ".concat(e.className," ");t!==n.indexOf(" ".concat(this.args[0]," "))>-1&&(e.className=t?"".concat(e.className," ").concat(this.args[0]):n.replace(" ".concat(this.args[0]," ")," ").trim())},text:function(e,t){e.textContent=null!=t?t:""},html:function(e,t){e.innerHTML=null!=t?t:""},show:function(e,t){e.style.display=t?"":"none"},hide:function(e,t){e.style.display=t?"none":""},enabled:function(e,t){e.disabled=!t},disabled:function(e,t){e.disabled=!!t},checked:{publishes:!0,priority:2e3,bind:function(e){var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener("change",this.callback)},unbind:function(e){e.removeEventListener("change",this.callback)},routine:function(e,t){"radio"===e.type?e.checked=r(e.value)===r(t):e.checked=!!t}},value:{publishes:!0,priority:3e3,bind:function(e){if(this.isRadio="INPUT"===e.tagName&&"radio"===e.type,!this.isRadio){this.event=e.getAttribute("event-name")||("SELECT"===e.tagName?"change":"input");var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener(this.event,this.callback)}},unbind:function(e){this.isRadio||e.removeEventListener(this.event,this.callback)},routine:function(e,t){if(this.isRadio)e.setAttribute("value",t);else if("select-multiple"===e.type){if(t instanceof Array)for(var n=0;n<e.length;n++){var i=e[n];i.selected=t.indexOf(i.value)>-1}}else r(t)!==r(e.value)&&(e.value=null!=t?t:"")}},if:{block:!0,priority:4e3,bind:function(e){this.marker?!1===this.bound&&this.nested&&this.nested.bind():(this.marker=document.createComment(" tinybind: "+this.type+" "+this.keypath+" "),this.attached=!1,e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)),this.bound=!0},unbind:function(){this.nested&&(this.nested.unbind(),this.bound=!1)},routine:function(e,t){(t=!!t)!==this.attached&&(t?(this.nested||(this.nested=new i.default(e,this.view.models,this.view.options),this.nested.bind()),this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.attached=!0):(e.parentNode.removeChild(e),this.attached=!1))},update:function(e){this.nested&&this.nested.update(e)}}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=["push","pop","shift","unshift","sort","reverse","splice"],r={counter:0,weakmap:{},weakReference:function(e){if(!e.hasOwnProperty("__rv")){var t=this.counter++;Object.defineProperty(e,"__rv",{value:t})}return this.weakmap[e.__rv]||(this.weakmap[e.__rv]={callbacks:{}}),this.weakmap[e.__rv]},cleanupWeakReference:function(e,t){Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length||delete this.weakmap[t]},stubFunction:function(e,t){var n=e[t],i=this.weakReference(e),r=this.weakmap;e[t]=function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];var a=n.apply(e,o);return Object.keys(i.pointers).forEach(function(e){var t=i.pointers[e];r[e]&&r[e].callbacks[t]instanceof Array&&r[e].callbacks[t].forEach(function(e){e.sync()})}),a}},observeMutations:function(e,t,n){var r=this;if(e instanceof Array){var o=this.weakReference(e);o.pointers||(o.pointers={},i.forEach(function(t){r.stubFunction(e,t)})),o.pointers[t]||(o.pointers[t]=[]),-1===o.pointers[t].indexOf(n)&&o.pointers[t].push(n)}},unobserveMutations:function(e,t,n){if(e instanceof Array&&null!=e.__rv){var i=this.weakmap[e.__rv];if(i){var r=i.pointers[t];if(r){var o=r.indexOf(n);o>-1&&r.splice(o,1),r.length||delete i.pointers[t],this.cleanupWeakReference(i,e.__rv)}}}},observe:function(e,t,n){var i,r=this,o=this.weakReference(e).callbacks;if(!o[t]){o[t]=[];var s=Object.getOwnPropertyDescriptor(e,t);s&&(s.get||s.set||!s.configurable)||(i=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return i},set:function(n){if(n!==i){r.unobserveMutations(i,e.__rv,t),i=n;var o=r.weakmap[e.__rv];if(o){var s=o.callbacks[t];s&&s.forEach(function(e){e.sync()}),r.observeMutations(n,e.__rv,t)}}}}))}-1===o[t].indexOf(n)&&o[t].push(n),this.observeMutations(e[t],e.__rv,t)},unobserve:function(e,t,n){var i=this.weakmap[e.__rv];if(i){var r=i.callbacks[t];if(r){var o=r.indexOf(n);o>-1&&(r.splice(o,1),r.length||(delete i.callbacks[t],this.unobserveMutations(e[t],e.__rv,t))),this.cleanupWeakReference(i,e.__rv)}}},get:function(e,t){return e[t]},set:function(e,t,n){e[t]=n}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentBinding=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),r=n(0),o=n(5),s=n(3);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=0,d=1,p=function(e){function t(e,n,o){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=c(this,l(t).call(this,e,n,o,null,null,null,null))).view=e,s.el=n,s.type=o,s.component=e.options.components[s.type],s.static={},s.observers={},s.upstreamObservers={};for(var a=i.default._fullPrefix,u=0,f=n.attributes.length;u<f;u++){var p=n.attributes[u];if(0!==p.name.indexOf(a)){var v=s.camelCase(p.name),b=(0,r.parseType)(p.value),y=s.component.static;if(y&&y.indexOf(v)>-1)s.static[v]=p.value;else if(b.type===h)s.static[v]=b.value;else{if(b.type!==d)throw new Error("can't parse component attribute",p,b);s.observers[v]=p.value}}}return s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,s.Binding),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"sync",value:function(){}},{key:"update",value:function(){}},{key:"publish",value:function(){}},{key:"locals",value:function(){var e=this,t={};return Object.keys(this.static).forEach(function(n){t[n]=e.static[n]}),Object.keys(this.observers).forEach(function(n){t[n]=e.observers[n].value()}),t}},{key:"camelCase",value:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"bind",value:function(){var e=this,t={};if(this.bound||(Object.keys(this.observers).forEach(function(t){var n=e.observers[t];e.observers[t]=e.observe(e.view.models,n,function(t){return function(){e.componentView.models[t]=e.observers[t].value()}}.call(e,t))}),this.bound=!0),this.componentView)this.componentView.bind();else{this.el.innerHTML=this.component.template.call(this);var n=this.component.initialize.call(this,this.el,this.locals());this.el._bound=!0,o.EXTENSIONS.forEach(function(n){t[n]={},e.component[n]&&Object.keys(e.component[n]).forEach(function(i){t[n][i]=e.component[n][i]}),Object.keys(e.view.options[n]).forEach(function(i){t[n][i]&&(t[n][i]=e.view[n][i])})}),o.OPTIONS.forEach(function(n){null!=e.component[n]?t[n]=e.component[n]:t[n]=e.view[n]}),this.componentView=i.default.bind(Array.prototype.slice.call(this.el.childNodes),n,t),Object.keys(this.observers).forEach(function(t){var n=e.observers[t],i=e.componentView.models,r=e.observe(i,t,function(t,n){return function(){n.setValue(e.componentView.models[t])}}.call(e,t,n));e.upstreamObservers[t]=r})}}},{key:"unbind",value:function(){var e=this;Object.keys(this.upstreamObservers).forEach(function(t){e.upstreamObservers[t].unobserve()}),Object.keys(this.observers).forEach(function(t){e.observers[t].unobserve()}),this.componentView&&this.componentView.unbind.call(this)}}]),t}();t.ComponentBinding=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n(1)),r=u(n(4)),o=u(n(7)),s=u(n(6)),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}i.default.binders=s.default,i.default.adapters["."]=o.default;var c=function(e,t){return console.log("mergeObject",e,t),Object.keys(t).forEach(function(n){e[n]&&e[n]!=={}||(e[n]=t[n])}),console.log("result",e),e};i.default.bind=function(e,t,n){var o={binders:{},formatters:{},components:{},adapters:{},starBinders:{}};t=t||{},n&&(c(o.binders,n.binders),c(o.formatters,n.formatters),c(o.components,n.components),c(o.adapters,n.adapters),o.prefix=n.prefix?n.prefix:i.default.prefix,o.templateDelimiters=n.templateDelimiters?n.templateDelimiters:i.default.templateDelimiters,o.rootInterface=n.prefix?n.rootInterface:i.default.rootInterface,o.preloadData=n.prefix?n.preloadData:i.default.preloadData,o.handler=n.prefix?n.handler:i.default.handler),c(o.binders,i.default.binders),c(o.formatters,i.default.formatters),c(o.components,i.default.components),c(o.adapters,i.default.adapters),o.starBinders=Object.keys(o.binders).filter(function(e){return e.indexOf("*")>0}),a.Observer.updateOptions(o);var s=new r.default(e,t,o);return s.bind(),s},i.default.init=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t||(t=document.createElement("div"));var r=i.default.components[e];t.innerHTML=r.template.call(i.default,t);var o=r.initialize.call(i.default,t,n),s=i.default.bind(t,o);return s.bind(),s},i.default.formatters.negate=i.default.formatters.not=function(e){return!e};var l=i.default;t.default=l}]).default});