{"version":3,"file":"tinybind.esm.js","sources":["../src/constants.js","../src/parsers.js","../src/tinybind.js","../src/observer.js","../src/binding.js","../src/component-binding.js","../src/view.js","../src/adapter.js","../src/binders.js","../src/export.js"],"sourcesContent":["export const OPTIONS = [\n  'prefix',\n  'templateDelimiters',\n  'rootInterface',\n  'preloadData',\n  'handler'\n];\n\nexport const EXTENSIONS = [\n  'binders',\n  'formatters',\n  'components',\n  'adapters'\n];","/**\n * Used also in parsers.parseType\n * TODO outsource\n */\nconst PRIMITIVE = 0;\nconst KEYPATH = 1;\n\nconst QUOTED_STR = /^'.*'$|^\".*\"$/; // regex to test if string is wrapped in \" or '\n\n// Used in parsers.parseTemplate\nconst TEXT = 0;\nconst BINDING = 1;\n\n// Test if string is a json string\nexport function isJson(str) {\n  try {\n    const val = JSON.parse(str);\n    return (val instanceof Array || val instanceof Object) ? true : false;\n  }\n  catch (error) {\n    return false;\n  }\n}\n\n// Parser and tokenizer for getting the type and value from a string.\nexport function parseType(string) {\n  let type = PRIMITIVE;\n  let value = string;\n  if (QUOTED_STR.test(string)) {\n    value = string.slice(1, -1);\n  } else if (string === 'true') {\n    value = true;\n  } else if (string === 'false') {\n    value = false;\n  } else if (string === 'null') {\n    value = null;\n  } else if (string === 'undefined') {\n    value = undefined;\n  } else if (!isNaN(string)) {\n    value = Number(string);\n  } else if (isJson(string)) {\n    value = JSON.parse(string);\n  } else {\n    type = KEYPATH;\n  }\n  return {type: type, value: value};\n}\n\n// Template parser and tokenizer for mustache-style text content bindings.\n// Parses the template and returns a set of tokens, separating static portions\n// of text from binding declarations.\nexport function parseTemplate(template, delimiters) {\n  var tokens;\n  let length = template.length;\n  let index = 0;\n  let lastIndex = 0;\n  let open = delimiters[0], close = delimiters[1];\n\n  while (lastIndex < length) {\n    index = template.indexOf(open, lastIndex);\n\n    if (index < 0) {\n      if (tokens) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex)\n        });\n      }\n\n      break;\n    } else {\n      tokens = tokens || [];\n      if (index > 0 && lastIndex < index) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex, index)\n        });\n      }\n\n      lastIndex = index + open.length;\n      index = template.indexOf(close, lastIndex);\n\n      if (index < 0) {\n        let substring = template.slice(lastIndex - close.length);\n        let lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === TEXT) {\n          lastToken.value += substring;\n        } else {\n          tokens.push({\n            type: TEXT,\n            value: substring\n          });\n        }\n\n        break;\n      }\n\n      let value = template.slice(lastIndex, index).trim();\n\n      tokens.push({\n        type: BINDING,\n        value: value\n      });\n\n      lastIndex = index + close.length;\n    }\n  }\n\n  return tokens;\n}\n","import {EXTENSIONS} from './constants';\nimport {parseTemplate, parseType} from './parsers';\n\nconst tinybind = {\n  // Global binders.\n  binders: {},\n\n  // Global components.\n  components: {},\n\n  // Global formatters.\n  formatters: {},\n\n  // Global sightglass adapters.\n  adapters: {},\n\n  // Default attribute prefix.\n  _prefix: 'rv',\n\n  _fullPrefix: 'rv-',\n\n  get prefix () {\n    return this._prefix;\n  },\n\n  set prefix (value) {\n    this._prefix = value;\n    this._fullPrefix = value + '-';\n  },\n\n  parseTemplate: parseTemplate,\n\n  parseType: parseType,\n\n  // Default template delimiters.\n  templateDelimiters: ['{', '}'],\n\n  // Default sightglass root interface.\n  rootInterface: '.',\n\n  // Preload data by default.\n  preloadData: true,\n\n  // Default event handler.\n  handler: function(context, ev, binding) {\n    this.call(context, ev, binding.view.models);\n  },\n\n  // Sets the attribute on the element. If no binder above is matched it will fall\n  // back to using this binder.\n  fallbackBinder: function(el, value) {\n    if (value != null) {\n      el.setAttribute(this.type, value);\n    } else {\n      el.removeAttribute(this.type);\n    }  \n  },\n\n  // Merges an object literal into the corresponding global options.\n  configure: function(options) {\n    if (!options) {\n      return;\n    }\n    Object.keys(options).forEach(option => {\n      let value = options[option];\n\n      if (EXTENSIONS.indexOf(option) > -1) {\n        Object.keys(value).forEach(key => {\n          this[option][key] = value[key];\n        });\n      } else {\n        this[option] = value;\n      }\n    });\n  }\n};\n\nexport default tinybind;\n","\n// Check if a value is an object than can be observed.\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj !== null;\n}\n\n// Error thrower.\nfunction error(message) {\n  throw new Error('[Observer] ' + message);\n}\n\nvar adapters;\nvar interfaces;\nvar rootInterface;\n\n// Constructs a new keypath observer and kicks things off.\nfunction Observer(obj, keypath, callback) {\n  this.keypath = keypath;\n  this.callback = callback;\n  this.objectPath = [];\n  this.parse();\n  this.obj = this.getRootObject(obj);\n\n  if (isObject(this.target = this.realize())) {\n    this.set(true, this.key, this.target, this.callback);\n  }\n}\n\nObserver.updateOptions = function(options) {\n  adapters = options.adapters;\n  interfaces = Object.keys(adapters);\n  rootInterface = options.rootInterface;\n};\n\n// Tokenizes the provided keypath string into interface + path tokens for the\n// observer to work with.\nObserver.tokenize = function(keypath, root) {\n  var tokens = [];\n  var current = {i: root, path: ''};\n  var index, chr;\n\n  for (index = 0; index < keypath.length; index++) {\n    chr = keypath.charAt(index);\n\n    if (!!~interfaces.indexOf(chr)) {\n      tokens.push(current);\n      current = {i: chr, path: ''};\n    } else {\n      current.path += chr;\n    }\n  }\n\n  tokens.push(current);\n  return tokens;\n};\n\n// Parses the keypath using the interfaces defined on the view. Sets variables\n// for the tokenized keypath as well as the end key.\nObserver.prototype.parse = function() {\n  var path, root;\n\n  if (!interfaces.length) {\n    error('Must define at least one adapter interface.');\n  }\n\n  if (!!~interfaces.indexOf(this.keypath[0])) {\n    root = this.keypath[0];\n    path = this.keypath.substr(1);\n  } else {\n    root = rootInterface;\n    path = this.keypath;\n  }\n\n  this.tokens = Observer.tokenize(path, root);\n  this.key = this.tokens.pop();\n};\n\n// Realizes the full keypath, attaching observers for every key and correcting\n// old observers to any changed objects in the keypath.\nObserver.prototype.realize = function() {\n  var current = this.obj;\n  var unreached = -1;\n  var prev;\n  var token;\n\n  for (let index = 0; index < this.tokens.length; index++) {\n    token = this.tokens[index];\n    if (isObject(current)) {\n      if (typeof this.objectPath[index] !== 'undefined') {\n        if (current !== (prev = this.objectPath[index])) {\n          this.set(false, token, prev, this);\n          this.set(true, token, current, this);\n          this.objectPath[index] = current;\n        }\n      } else {\n        this.set(true, token, current, this);\n        this.objectPath[index] = current;\n      }\n\n      current = this.get(token, current);\n    } else {\n      if (unreached === -1) {\n        unreached = index;\n      }\n\n      prev = this.objectPath[index];\n      if (prev) {\n        this.set(false, token, prev, this);\n      }\n    }\n  }\n\n  if (unreached !== -1) {\n    this.objectPath.splice(unreached);\n  }\n\n  return current;\n};\n\n// Updates the keypath. This is called when any intermediary key is changed.\nObserver.prototype.sync = function() {\n  var next, oldValue, newValue;\n\n  if ((next = this.realize()) !== this.target) {\n    if (isObject(this.target)) {\n      this.set(false, this.key, this.target, this.callback);\n    }\n\n    if (isObject(next)) {\n      this.set(true, this.key, next, this.callback);\n    }\n\n    oldValue = this.value();\n    this.target = next;\n    newValue = this.value();\n    if (newValue !== oldValue || newValue instanceof Function) this.callback.sync();\n  } else if (next instanceof Array) {\n    this.callback.sync();\n  }\n};\n\n// Reads the current end value of the observed keypath. Returns undefined if\n// the full keypath is unreachable.\nObserver.prototype.value = function() {\n  if (isObject(this.target)) {\n    return this.get(this.key, this.target);\n  }\n};\n\n// Sets the current end value of the observed keypath. Calling setValue when\n// the full keypath is unreachable is a no-op.\nObserver.prototype.setValue = function(value) {\n  if (isObject(this.target)) {\n    adapters[this.key.i].set(this.target, this.key.path, value);\n  }\n};\n\n// Gets the provided key on an object.\nObserver.prototype.get = function(key, obj) {\n  return adapters[key.i].get(obj, key.path);\n};\n\n// Observes or unobserves a callback on the object using the provided key.\nObserver.prototype.set = function(active, key, obj, callback) {\n  var action = active ? 'observe' : 'unobserve';\n  adapters[key.i][action](obj, key.path, callback);\n};\n\n\n// Unobserves the entire keypath.\nObserver.prototype.unobserve = function() {\n  var obj;\n  var token;\n\n  for (let index = 0; index < this.tokens.length; index++) {\n    token = this.tokens[index];\n    obj = this.objectPath[index];\n    if (obj) {\n      this.set(false, token, obj, this);\n    }\n  }\n\n  if (isObject(this.target)) {\n    this.set(false, this.key, this.target, this.callback);\n  }\n};\n// traverse the scope chain to find the scope which has the root property\n// if the property is not found in chain, returns the root scope\nObserver.prototype.getRootObject = function (obj) {\n  var rootProp, current;\n  if (!obj.$parent) {\n    return obj;\n  }\n\n  if (this.tokens.length) {\n    rootProp = this.tokens[0].path;\n  } else {\n    rootProp = this.key.path;\n  }\n\n  current = obj;\n  while (current.$parent && (current[rootProp] === undefined)) {\n    current = current.$parent;\n  }\n\n  return current;\n};\n\nexport default Observer;\n","import {parseType} from './parsers';\nimport Observer from './observer';\n\nfunction getInputValue(el) {\n  let results = [];\n  if (el.type === 'checkbox') {\n    return el.checked;\n  } else if (el.type === 'select-multiple') {\n\n    el.options.forEach(option => {\n      if (option.selected) {\n        results.push(option.value);\n      }\n    });\n\n    return results;\n  } else {\n    return el.value;\n  }\n}\n\nconst FORMATTER_ARGS =  /[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g;\nconst FORMATTER_SPLIT = /\\s+/;\n\n/**\n * Used also in parsers.parseType\n * TODO outsource\n */\nconst PRIMITIVE = 0;\nconst KEYPATH = 1;\n\n// A single binding between a model attribute and a DOM element.\nexport class Binding {\n  /**\n   * All information about the binding is passed into the constructor; the\n   * containing view, the DOM node, the type of binding, the model object and the\n   * keypath at which to listen for changes.\n   * @param {*} view \n   * @param {*} el \n   * @param {*} type \n   * @param {*} keypath \n   * @param {*} binder \n   * @param {*} args The start binders, on `class-*` args[0] wil be the classname \n   * @param {*} formatters \n   */\n  constructor(view, el, type, keypath, binder, args, formatters) {\n    this.view = view;\n    this.el = el;\n    this.type = type;\n    this.keypath = keypath;\n    this.binder = binder;\n    this.args = args;\n    this.formatters = formatters;\n    this.formatterObservers = {};\n    this.model = undefined;\n  }\n\n  // Observes the object keypath\n  observe(obj, keypath) {\n    return new Observer(obj, keypath, this);\n  }\n\n  parseTarget() {\n    if (this.keypath) {\n      let token = parseType(this.keypath);\n      if (token.type === PRIMITIVE) {\n        this.value = token.value;\n      } else if(token.type === KEYPATH){\n        this.observer = this.observe(this.view.models, this.keypath);\n        this.model = this.observer.target;\n      } else {\n        throw new Error('Unknown type in token', token);\n      }\n    } else {\n      this.value = undefined;\n    }\n  }\n  \n  /**\n   * Get the iteration alias, used in the interation binders like `each-*`\n   * @param {*} modelName \n   * @see https://github.com/mikeric/rivets/blob/master/dist/rivets.js#L26\n   * @see https://github.com/mikeric/rivets/blob/master/dist/rivets.js#L1175\n   */\n  getIterationAlias(modelName) {\n    return '%' + modelName + '%';\n  }\n\n  parseFormatterArguments(args, formatterIndex) {\n    return args\n      .map(parseType)\n      .map(({type, value}, ai) => {\n        if (type === PRIMITIVE) {\n          return value;\n        } else if (type === KEYPATH) {\n          if (!this.formatterObservers[formatterIndex]) {\n            this.formatterObservers[formatterIndex] = {};\n          }\n\n          let observer = this.formatterObservers[formatterIndex][ai];\n\n          if (!observer) {\n            observer = this.observe(this.view.models, value);\n            this.formatterObservers[formatterIndex][ai] = observer;\n          }\n\n          return observer.value();\n        } else {\n          throw new Error('Unknown type', type, value);\n        }\n      });\n  }\n\n  // Applies all the current formatters to the supplied value and returns the\n  // formatted value.\n  formattedValue(value) {\n    return this.formatters.reduce((result, declaration, index) => {\n      let args = declaration.match(FORMATTER_ARGS);\n      let id = args.shift();\n      let formatter = this.view.options.formatters[id];\n\n      const processedArgs = this.parseFormatterArguments(args, index);\n\n      if (formatter && (formatter.read instanceof Function)) {\n        result = formatter.read(result, ...processedArgs);\n      } else if (formatter instanceof Function) {\n        result = formatter(result, ...processedArgs);\n      }\n      return result;\n    }, value);\n  }\n\n  // Returns an event handler for the binding around the supplied function.\n  eventHandler(fn) {\n    let binding = this;\n    let handler = binding.view.options.handler;\n\n    return function(ev) {\n      handler.call(fn, this, ev, binding);\n    };\n  }\n\n  // Sets the value for the binding. This Basically just runs the binding routine\n  // with the supplied value formatted.\n  set(value) {\n    if ((value instanceof Function) && !this.binder.function) {\n      value = this.formattedValue(value.call(this.model));\n    } else {\n      value = this.formattedValue(value);\n    }\n\n    let routineFn = this.binder.routine || this.binder;\n\n    if (routineFn instanceof Function) {\n      routineFn.call(this, this.el, value);\n    }\n  }\n\n  // Syncs up the view binding with the model.\n  sync() {\n    if (this.observer) {\n      this.model = this.observer.target;\n      this.set(this.observer.value());\n    } else {\n      this.set(this.value);\n    }\n  }\n\n  // Publishes the value currently set on the input element back to the model.\n  publish() {\n    if (this.observer) {\n      var value = this.formatters.reduceRight((result, declaration, index) => {\n        const args = declaration.split(FORMATTER_SPLIT);\n        const id = args.shift();\n        const formatter = this.view.options.formatters[id];\n        const processedArgs = this.parseFormatterArguments(args, index);\n\n        if (formatter && formatter.publish) {\n          result = formatter.publish(result, ...processedArgs);\n        }\n        return result;\n      }, this.getValue(this.el));\n\n      this.observer.setValue(value);\n    }\n  }\n\n  // Subscribes to the model for changes at the specified keypath. Bi-directional\n  // routines will also listen for changes on the element to propagate them back\n  // to the model.\n  bind() {\n    this.parseTarget();\n\n    if (this.binder.hasOwnProperty('bind')) {\n      this.binder.bind.call(this, this.el);\n    }\n\n    if (this.view.options.preloadData) {\n      this.sync();\n    }\n  }\n\n  // Unsubscribes from the model and the element.\n  unbind() {\n    if (this.binder.unbind) {\n      this.binder.unbind.call(this, this.el);\n    }\n\n    if (this.observer) {\n      this.observer.unobserve();\n    }\n\n    Object.keys(this.formatterObservers).forEach(fi => {\n      let args = this.formatterObservers[fi];\n\n      Object.keys(args).forEach(ai => {\n        args[ai].unobserve();\n      });\n    });\n\n    this.formatterObservers = {};\n  }\n\n  // Updates the binding's model from what is currently set on the view. Unbinds\n  // the old model first and then re-binds with the new model.\n  update(models = {}) {\n    if (this.observer) {\n      this.model = this.observer.target;\n    }\n\n    if (this.binder.update) {\n      this.binder.update.call(this, models);\n    }\n  }\n\n  // Returns elements value\n  getValue(el) {\n    if (this.binder && this.binder.getValue) {\n      return this.binder.getValue.call(this, el);\n    } else {\n      return getInputValue(el);\n    }\n  }\n}\n","import tinybind from './tinybind';\nimport {parseType} from './parsers';\nimport {EXTENSIONS, OPTIONS} from './constants';\nimport {Binding} from './binding';\n\n/**\n * Used also in parsers.parseType\n * TODO outsource\n */\nconst PRIMITIVE = 0;\nconst KEYPATH = 1;\n\n// component view encapsulated as a binding within it's parent view.\nexport class ComponentBinding extends Binding {\n  // Initializes a component binding for the specified view. The raw component\n  // element is passed in along with the component type. Attributes and scope\n  // inflections are determined based on the components defined attributes.\n  constructor(view, el, type) {\n    super(view, el, type, null, null, null, null);\n    this.view = view;\n    this.el = el;\n    this.type = type;\n    this.component = view.options.components[this.type];\n    this.static = {};\n    this.observers = {};\n    this.upstreamObservers = {};\n    \n    let bindingPrefix = tinybind._fullPrefix;\n    \n    // parse component attributes\n    for (let i = 0, len = el.attributes.length; i < len; i++) {\n      let attribute = el.attributes[i];\n\n      // if attribute starts not with binding prefix. E.g. rv-\n      if (attribute.name.indexOf(bindingPrefix) !== 0) {\n        let propertyName = this.camelCase(attribute.name);\n        let token = parseType(attribute.value);\n        let stat = this.component.static;\n    \n        if (stat && stat.indexOf(propertyName) > -1) {\n          this.static[propertyName] = attribute.value;\n        } else if(token.type === PRIMITIVE) {\n          this.static[propertyName] = token.value;\n        } else if(token.type === KEYPATH) {\n          this.observers[propertyName] = attribute.value;\n        } else {\n          throw new Error('can\\'t parse component attribute', attribute, token);\n        }\n      }\n    }\n  }\n    \n    \n  // Intercepts `tinybind.Binding::sync` since component bindings are not bound to\n  // a particular model to update it's value.\n  sync() {}\n    \n  // Intercepts `tinybind.Binding::update` since component bindings are not bound\n  // to a particular model to update it's value.\n  update() {}\n    \n  // Intercepts `tinybind.Binding::publish` since component bindings are not bound\n  // to a particular model to update it's value.\n  publish() {}\n    \n  // Returns an object map using the component's scope inflections.\n  locals() {\n    let result = {};\n    \n    Object.keys(this.static).forEach(key => {\n      result[key] = this.static[key];\n    });\n    \n    Object.keys(this.observers).forEach(key => {\n      result[key] = this.observers[key].value();\n    });\n    \n    return result;\n  }\n    \n  // Returns a camel-cased version of the string. Used when translating an\n  // element's attribute name into a property name for the component's scope.\n  camelCase(string) {\n    return string.replace(/-([a-z])/g, grouped => {\n      return grouped[1].toUpperCase();\n    });\n  }\n    \n  // Intercepts `tinybind.Binding::bind` to build `@componentView` with a localized\n  // map of models from the root view. Bind `@componentView` on subsequent calls.\n  bind() {\n    var options = {};\n    if (!this.bound) {\n      Object.keys(this.observers).forEach(key => {\n        let keypath = this.observers[key];\n    \n        this.observers[key] = this.observe(this.view.models, keypath, (key => {\n          return () => {\n            this.componentView.models[key] = this.observers[key].value();\n          };\n        }).call(this, key));\n      });\n    \n      this.bound = true;\n    }\n    \n    if (this.componentView) {\n      this.componentView.bind();\n    } else {\n      this.el.innerHTML = this.component.template.call(this);\n      let scope = this.component.initialize.call(this, this.el, this.locals());\n      this.el._bound = true;\n    \n    \n      EXTENSIONS.forEach(extensionType => {\n        options[extensionType] = {};\n    \n        if (this.component[extensionType]) {\n          Object.keys(this.component[extensionType]).forEach(key => {\n            options[extensionType][key] = this.component[extensionType][key];\n          });\n        }\n    \n        Object.keys(this.view.options[extensionType]).forEach(key => {\n          if (options[extensionType][key]) {\n            options[extensionType][key] = this.view[extensionType][key];\n          }\n        });\n      });\n    \n      OPTIONS.forEach(option => {\n        if (this.component[option] != null) {\n          options[option] = this.component[option];\n        } else {\n          options[option] = this.view[option];\n        }\n      });\n    \n      //there's a cyclic dependency that makes imported View a dummy object. Use tinybind.bind\n      //this.componentView = new View(this.el, scope, options)\n      //this.componentView.bind()\n      this.componentView = tinybind.bind(Array.prototype.slice.call(this.el.childNodes), scope, options);\n    \n      Object.keys(this.observers).forEach(key => {\n        let observer = this.observers[key];\n        let models = this.componentView.models;\n    \n        let upstream = this.observe(models, key, ((key, observer) => {\n          return () => {\n            observer.setValue(this.componentView.models[key]);\n          };\n        }).call(this, key, observer));\n    \n        this.upstreamObservers[key] = upstream;\n      });\n    }\n  }\n    \n  // Intercept `tinybind.Binding::unbind` to be called on `@componentView`.\n  unbind() {\n    Object.keys(this.upstreamObservers).forEach(key => {\n      this.upstreamObservers[key].unobserve();\n    });\n    \n    Object.keys(this.observers).forEach(key => {\n      this.observers[key].unobserve();\n    });\n    \n    if (this.componentView) {\n      this.componentView.unbind.call(this);\n    }\n  }\n}","import tinybind from './tinybind';\nimport { Binding } from './binding';\nimport { ComponentBinding } from './component-binding';\nimport { parseTemplate } from './parsers';\n\nconst textBinder = {\n  routine: (node, value) => {\n    node.data = (value != null) ? value : '';\n  }\n};\n\nconst DECLARATION_SPLIT = /((?:'[^']*')*(?:(?:[^\\|']*(?:'[^']*')+[^\\|']*)+|[^\\|]+))|^$/g;\n\nconst parseNode = (view, node) => {\n  let block = false;\n\n  if (node.nodeType === 3) {\n    let tokens = parseTemplate(node.data, tinybind.templateDelimiters);\n\n    if (tokens) {\n      for (let i = 0; i < tokens.length; i++) {\n        let token = tokens[i];\n        let text = document.createTextNode(token.value);\n        node.parentNode.insertBefore(text, node);\n\n        if (token.type === 1) {\n          view.buildBinding(text, null, token.value, textBinder, null);\n        }\n      }\n\n      node.parentNode.removeChild(node);\n    }\n    block = true;\n  } else if (node.nodeType === 1) {\n    block = view.traverse(node);\n  }\n\n  if (!block) {\n    for (let i = 0; i < node.childNodes.length; i++) {\n      parseNode(view, node.childNodes[i]);\n    }\n  }\n};\n\nconst bindingComparator = (a, b) => {\n  let aPriority = a.binder ? (a.binder.priority || 0) : 0;\n  let bPriority = b.binder ? (b.binder.priority || 0) : 0;\n  return bPriority - aPriority;\n};\n\nconst trimStr = (str) => {\n  return str.trim();\n};\n\n// A collection of bindings built from a set of parent nodes.\nexport default class View {\n  // The DOM elements and the model objects for binding are passed into the\n  // constructor along with any local options that should be used throughout the\n  // context of the view and it's bindings.\n  constructor(els, models, options) {\n    if (els.jquery || els instanceof Array) {\n      this.els = els;\n    } else {\n      this.els = [els];\n    }\n\n    this.models = models;\n    this.options = options;\n\n    this.build();\n  }\n\n\n  buildBinding(node, type, declaration, binder, args) {\n    let pipes = declaration.match(DECLARATION_SPLIT).map(trimStr);\n    let keypath = pipes.shift();\n    this.bindings.push(new Binding(this, node, type, keypath, binder, args, pipes));\n  }\n\n  // Parses the DOM tree and builds `Binding` instances for every matched\n  // binding declaration.\n  build() {\n    this.bindings = [];\n\n    let elements = this.els, i, len;\n    for (i = 0, len = elements.length; i < len; i++) {\n      parseNode(this, elements[i]);\n    }\n\n    this.bindings.sort(bindingComparator);\n  }\n\n  traverse(node) {\n    let bindingPrefix = tinybind._fullPrefix;\n    let block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE';\n    let attributes = node.attributes;\n    let bindInfos = [];\n    let starBinders = this.options.starBinders;\n    var type, binder, identifier, args;\n\n\n    for (let i = 0, len = attributes.length; i < len; i++) {\n      let attribute = attributes[i];\n      // if attribute starts with the binding prefix. E.g. rv\n      if (attribute.name.indexOf(bindingPrefix) === 0) {\n        type = attribute.name.slice(bindingPrefix.length);\n        binder = this.options.binders[type];\n        args = [];\n\n        if (!binder) {\n          for (let k = 0; k < starBinders.length; k++) {\n            identifier = starBinders[k];\n            if (type.slice(0, identifier.length - 1) === identifier.slice(0, -1)) {\n              binder = this.options.binders[identifier];\n              args.push(type.slice(identifier.length - 1));\n              break;\n            }\n          }\n        }\n\n        if (!binder) {\n          binder = tinybind.fallbackBinder;\n        }\n\n        if (binder.block) {\n          this.buildBinding(node, type, attribute.value, binder, args);\n          node.removeAttribute(attribute.name);\n          return true;\n        }\n\n        bindInfos.push({attr: attribute, binder: binder, type: type, args: args});\n      }\n    }\n\n    for (let i = 0; i < bindInfos.length; i++) {\n      let bindInfo = bindInfos[i];\n      this.buildBinding(node, bindInfo.type, bindInfo.attr.value, bindInfo.binder, bindInfo.args);\n      node.removeAttribute(bindInfo.attr.name);\n    }\n\n    // bind components\n    if (!block) {\n      type = node.nodeName.toLowerCase();\n\n      if (this.options.components[type] && !node._bound) {\n        this.bindings.push(new ComponentBinding(this, node, type));\n        block = true;\n      }\n    }\n\n    return block;\n  }\n\n  // Binds all of the current bindings for this view.\n  bind() {\n    this.bindings.forEach(binding => {\n      binding.bind();\n    });\n  }\n\n  // Unbinds all of the current bindings for this view.\n  unbind() {\n    this.bindings.forEach(binding => {\n      binding.unbind();\n    });\n  }\n\n  // Syncs up the view with the model by running the routines on all bindings.\n  sync() {\n    this.bindings.forEach(binding => {\n      binding.sync();\n    });\n  }\n\n  // Publishes the input values from the view back to the model (reverse sync).\n  publish() {\n    this.bindings.forEach(binding => {\n      if (binding.binder && binding.binder.publishes) {\n        binding.publish();\n      }\n    });\n  }\n\n  // Updates the view's models along with any affected bindings.\n  update(models = {}) {\n    Object.keys(models).forEach(key => {\n      this.models[key] = models[key];\n    });\n\n    this.bindings.forEach(binding => {\n      if (binding.update) {\n        binding.update(models);\n      }\n    });\n  }\n}\n","// The default `.` adapter that comes with tinybind.js. Allows subscribing to\n// properties on plain objects, implemented in ES5 natives using\n// `Object.defineProperty`.\n\nconst ARRAY_METHODS = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'sort',\n  'reverse',\n  'splice'\n];\n\nconst adapter = {\n  counter: 0,\n  weakmap: {},\n\n  weakReference: function(obj) {\n    if (!obj.hasOwnProperty('__rv')) {\n      let id = this.counter++;\n\n      Object.defineProperty(obj, '__rv', {\n        value: id\n      });\n    }\n\n    if (!this.weakmap[obj.__rv]) {\n      this.weakmap[obj.__rv] = {\n        callbacks: {}\n      };\n    }\n\n    return this.weakmap[obj.__rv];\n  },\n\n  cleanupWeakReference: function(ref, id) {\n    if (!Object.keys(ref.callbacks).length) {\n      if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n        delete this.weakmap[id];\n      }\n    }\n  },\n\n  stubFunction: function(obj, fn) {\n    let original = obj[fn];\n    let map = this.weakReference(obj);\n    let weakmap = this.weakmap;\n\n    obj[fn] = (...args) => {\n      let response = original.apply(obj, args);\n\n      Object.keys(map.pointers).forEach(r => {\n        let k = map.pointers[r];\n\n        if (weakmap[r]) {\n          if (weakmap[r].callbacks[k] instanceof Array) {\n            weakmap[r].callbacks[k].forEach(callback => {\n              callback.sync();\n            });\n          }\n        }\n      });\n\n      return response;\n    };\n  },\n\n  observeMutations: function(obj, ref, keypath) {\n    if (obj instanceof Array) {\n      let map = this.weakReference(obj);\n\n      if (!map.pointers) {\n        map.pointers = {};\n\n        ARRAY_METHODS.forEach(fn => {\n          this.stubFunction(obj, fn);\n        });\n      }\n\n      if (!map.pointers[ref]) {\n        map.pointers[ref] = [];\n      }\n\n      if (map.pointers[ref].indexOf(keypath) === -1) {\n        map.pointers[ref].push(keypath);\n      }\n    }\n  },\n\n  unobserveMutations: function(obj, ref, keypath) {\n    if ((obj instanceof Array) && (obj.__rv != null)) {\n      let map = this.weakmap[obj.__rv];\n\n      if (map) {\n        let pointers = map.pointers[ref];\n\n        if (pointers) {\n          let idx = pointers.indexOf(keypath);\n\n          if (idx > -1) {\n            pointers.splice(idx, 1);\n          }\n\n          if (!pointers.length) {\n            delete map.pointers[ref];\n          }\n\n          this.cleanupWeakReference(map, obj.__rv);\n        }\n      }\n    }\n  },\n\n  observe: function(obj, keypath, callback) {\n    var value;\n    let callbacks = this.weakReference(obj).callbacks;\n\n    if (!callbacks[keypath]) {\n      callbacks[keypath] = [];\n      let desc = Object.getOwnPropertyDescriptor(obj, keypath);\n\n      if (!desc || !(desc.get || desc.set || !desc.configurable)) {\n        value = obj[keypath];\n\n        Object.defineProperty(obj, keypath, {\n          enumerable: true,\n\n          get: () => {\n            return value;\n          },\n\n          set: newValue => {\n            if (newValue !== value) {\n              this.unobserveMutations(value, obj.__rv, keypath);\n              value = newValue;\n              let map = this.weakmap[obj.__rv];\n\n              if (map) {\n                let callbacks = map.callbacks[keypath];\n\n                if (callbacks) {\n                  callbacks.forEach(cb => {\n                      cb.sync();\n                  });\n                }\n\n                this.observeMutations(newValue, obj.__rv, keypath);\n              }\n            }\n          }\n        });\n      }\n    }\n\n    if (callbacks[keypath].indexOf(callback) === -1) {\n      callbacks[keypath].push(callback);\n    }\n\n    this.observeMutations(obj[keypath], obj.__rv, keypath);\n  },\n\n  unobserve: function(obj, keypath, callback) {\n    let map = this.weakmap[obj.__rv];\n\n    if (map) {\n      let callbacks = map.callbacks[keypath];\n\n      if (callbacks) {\n        let idx = callbacks.indexOf(callback);\n\n        if (idx > -1) {\n          callbacks.splice(idx, 1);\n\n          if (!callbacks.length) {\n            delete map.callbacks[keypath];\n            this.unobserveMutations(obj[keypath], obj.__rv, keypath);\n          }\n        }\n\n        this.cleanupWeakReference(map, obj.__rv);\n      }\n    }\n  },\n\n  get: function(obj, keypath) {\n    return obj[keypath];\n  },\n\n  set: (obj, keypath, value) => {\n    obj[keypath] = value;\n  }\n};\n\nexport default adapter;\n","import View from './view';\n\nconst getString = (value) => {\n  return value != null ? value.toString() : undefined;\n};\n\nconst times = (n, cb) => {\n  for (let i = 0; i < n; i++) cb();\n};\n\nfunction createView(binding, data, anchorEl) {\n  let template = binding.el.cloneNode(true);\n  let view = new View(template, data, binding.view.options);\n  view.bind();\n  binding.marker.parentNode.insertBefore(template, anchorEl);\n  return view;\n}\n\nconst binders = {\n  // Binds an event handler on the element.\n  'on-*': {\n    function: true,\n    priority: 1000,\n\n    unbind: function(el) {\n      if (this.handler) {\n        el.removeEventListener(this.args[0], this.handler);\n      }\n    },\n\n    routine: function(el, value) {\n      if (this.handler) {\n        el.removeEventListener(this.args[0], this.handler);\n      }\n\n      this.handler = this.eventHandler(value);\n      el.addEventListener(this.args[0], this.handler);\n    }\n  },\n\n  // Appends bound instances of the element in place for each item in the array.\n  'each-*': {\n    block: true,\n\n    priority: 4000,\n\n    bind(el) {\n      if (!this.marker) {\n        this.marker = document.createComment(` tinybind: ${this.type} `);\n        this.iterated = [];\n\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      } else {\n        this.iterated.forEach(view => {\n          view.bind();\n        });\n      }\n    },\n\n    unbind(el) {\n      if (this.iterated) {\n        this.iterated.forEach(view => {\n          view.unbind();\n        });\n      }\n    },\n\n    routine(el, collection) {\n      let modelName = this.args[0];\n      collection = collection || [];\n\n      // TODO support object keys to iterate over\n      if(!Array.isArray(collection)) {\n        throw new Error('each-' + modelName + ' needs an array to iterate over, but it is', collection);\n      }\n\n      // if index name is seted by `index-property` use this name, otherwise `%[modelName]%`  \n      let indexProp = el.getAttribute('index-property') || this.getIterationAlias(modelName);\n\n      collection.forEach((model, index) => {\n        let data = {$parent: this.view.models};\n        data[indexProp] = index;\n        data[modelName] = model;\n        let view = this.iterated[index];\n\n        if (!view) {\n\n          let previous = this.marker;\n\n          if (this.iterated.length) {\n            previous = this.iterated[this.iterated.length - 1].els[0];\n          }\n\n          view = createView(this, data, previous.nextSibling);\n          this.iterated.push(view);\n        } else {\n          if (view.models[modelName] !== model) {\n            // search for a view that matches the model\n            let matchIndex, nextView;\n            for (let nextIndex = index + 1; nextIndex < this.iterated.length; nextIndex++) {\n              nextView = this.iterated[nextIndex];\n              if (nextView.models[modelName] === model) {\n                matchIndex = nextIndex;\n                break;\n              }\n            }\n            if (matchIndex !== undefined) {\n              // model is in other position\n              // todo: consider avoiding the splice here by setting a flag\n              // profile performance before implementing such change\n              this.iterated.splice(matchIndex, 1);\n              this.marker.parentNode.insertBefore(nextView.els[0], view.els[0]);\n              nextView.models[indexProp] = index;\n            } else {\n              //new model\n              nextView = createView(this, data, view.els[0]);\n            }\n            this.iterated.splice(index, 0, nextView);\n          } else {\n            view.models[indexProp] = index;\n          }\n        }\n      });\n\n      if (this.iterated.length > collection.length) {\n        times(this.iterated.length - collection.length, () => {\n          let view = this.iterated.pop();\n          view.unbind();\n          this.marker.parentNode.removeChild(view.els[0]);\n        });\n      }\n\n      if (el.nodeName === 'OPTION') {\n        this.view.bindings.forEach(binding => {\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n            binding.sync();\n          }\n        });\n      }\n    },\n\n    update(models) {\n      let data = {};\n\n      //todo: add test and fix if necessary\n\n      Object.keys(models).forEach(key => {\n        if (key !== this.args[0]) {\n          data[key] = models[key];\n        }\n      });\n\n      this.iterated.forEach(view => {\n        view.update(data);\n      });\n    }\n  },\n\n  // Adds or removes the class from the element when value is true or false.\n  'class-*': function(el, value) {\n    let elClass = ` ${el.className} `;\n\n    if (value !== (elClass.indexOf(` ${this.args[0]} `) > -1)) {\n      if (value) {\n        el.className = `${el.className} ${this.args[0]}`;\n      } else {\n        el.className = elClass.replace(` ${this.args[0]} `, ' ').trim();\n      }\n    }\n  },\n\n  // Sets the element's text value.\n  text: (el, value) => {\n    el.textContent = value != null ? value : '';\n  },\n\n  // Sets the element's HTML content.\n  html: (el, value) => {\n    el.innerHTML = value != null ? value : '';\n  },\n\n  // Shows the element when value is true.\n  show: (el, value) => {\n    el.style.display = value ? '' : 'none';\n  },\n\n  // Hides the element when value is true (negated version of `show` binder).\n  hide: (el, value) => {\n    el.style.display = value ? 'none' : '';\n  },\n\n  // Enables the element when value is true.\n  enabled: (el, value) => {\n    el.disabled = !value;\n  },\n\n  // Disables the element when value is true (negated version of `enabled` binder).\n  disabled: (el, value) => {\n    el.disabled = !!value;\n  },\n\n  // Checks a checkbox or radio input when the value is true. Also sets the model\n  // property when the input is checked or unchecked (two-way binder).\n  checked: {\n    publishes: true,\n    priority: 2000,\n\n    bind: function(el) {\n      var self = this;\n      if (!this.callback) {\n        this.callback = function () {\n          self.publish();\n        };\n      }\n      el.addEventListener('change', this.callback);\n    },\n\n    unbind: function(el) {\n      el.removeEventListener('change', this.callback);\n    },\n\n    routine: function(el, value) {\n      if (el.type === 'radio') {\n        el.checked = getString(el.value) === getString(value);\n      } else {\n        el.checked = !!value;\n      }\n    }\n  },\n\n  // Sets the element's value. Also sets the model property when the input changes\n  // (two-way binder).\n  value: {\n    publishes: true,\n    priority: 3000,\n\n    bind: function(el) {\n      this.isRadio = el.tagName === 'INPUT' && el.type === 'radio';\n      if (!this.isRadio) {\n        this.event = el.getAttribute('event-name') || (el.tagName === 'SELECT' ? 'change' : 'input');\n\n        var self = this;\n        if (!this.callback) {\n          this.callback = function () {\n            self.publish();\n          };\n        }\n\n        el.addEventListener(this.event, this.callback);\n      }\n    },\n\n    unbind: function(el) {\n      if (!this.isRadio) {\n        el.removeEventListener(this.event, this.callback);\n      }\n    },\n\n    routine: function(el, value) {\n      if (this.isRadio) {\n        el.setAttribute('value', value);\n      } else {\n        if (el.type === 'select-multiple') {\n          if (value instanceof Array) {\n            for (let i = 0; i < el.length; i++) {\n              let option = el[i];\n              option.selected = value.indexOf(option.value) > -1;\n            }\n          }\n        } else if (getString(value) !== getString(el.value)) {\n          el.value = value != null ? value : '';\n        }\n      }\n    }\n  },\n\n  // Inserts and binds the element and it's child nodes into the DOM when true.\n  if: {\n    block: true,\n    priority: 4000,\n\n    bind: function(el) {\n      if (!this.marker) {\n        this.marker = document.createComment(' tinybind: ' + this.type + ' ' + this.keypath + ' ');\n        this.attached = false;\n\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      } else if (this.bound === false && this.nested) {\n        this.nested.bind();\n      }\n      this.bound = true;\n    },\n\n    unbind: function() {\n      if (this.nested) {\n        this.nested.unbind();\n        this.bound = false;\n      }\n    },\n\n    routine: function(el, value) {\n      value = !!value;\n      if (value !== this.attached) {\n        if (value) {\n\n          if (!this.nested) {\n            this.nested = new View(el, this.view.models, this.view.options);\n            this.nested.bind();\n          }\n\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n          this.attached = true;\n        } else {\n          el.parentNode.removeChild(el);\n          this.attached = false;\n        }\n      }\n    },\n\n    update: function(models) {\n      if (this.nested) {\n        this.nested.update(models);\n      }\n    }\n  }\n};\n\nexport default binders;\n","import tinybind from './tinybind';\nimport View from './view';\nimport {OPTIONS, EXTENSIONS} from './constants';\nimport adapter from './adapter';\nimport binders from './binders';\nimport Observer from './observer';\n\n// Returns the public interface.\n\ntinybind.binders = binders;\ntinybind.adapters['.'] = adapter;\n\n// Binds some data to a template / element. Returns a tinybind.View instance.\ntinybind.bind = (el, models, options) => {\n  let viewOptions = {};\n  models = models || {};\n  options = options || {};\n\n  EXTENSIONS.forEach(extensionType => {\n    viewOptions[extensionType] = Object.create(null);\n\n    if (options[extensionType]) {\n      Object.keys(options[extensionType]).forEach(key => {\n        viewOptions[extensionType][key] = options[extensionType][key];\n      });\n    }\n\n    Object.keys(tinybind[extensionType]).forEach(key => {\n      if (!viewOptions[extensionType][key]) {\n        viewOptions[extensionType][key] = tinybind[extensionType][key];\n      }\n    });\n  });\n\n  OPTIONS.forEach(option => {\n    let value = options[option];\n    viewOptions[option] = value != null ? value : tinybind[option];\n  });\n\n  viewOptions.starBinders = Object.keys(viewOptions.binders).filter(function (key) {\n    return key.indexOf('*') > 0;\n  });\n\n  Observer.updateOptions(viewOptions);\n\n  let view = new View(el, models, viewOptions);\n  view.bind();\n  return view;\n};\n\n// Initializes a new instance of a component on the specified element and\n// returns a tinybind.View instance.\t\t\ntinybind.init = (component, el, data = {}) => {\n  if (!el) {\n    el = document.createElement('div');\n  }\n\n  component = tinybind.components[component];\n  el.innerHTML = component.template.call(tinybind, el);\n  let scope = component.initialize.call(tinybind, el, data);\n\n  let view = tinybind.bind(el, scope);\n  view.bind();\n  return view;\n};\n\ntinybind.formatters.negate = tinybind.formatters.not = function (value) {\n  return !value;\n};\n\nexport default tinybind;\n"],"names":["OPTIONS","EXTENSIONS","PRIMITIVE","KEYPATH","QUOTED_STR","TEXT","BINDING","isJson","str","val","JSON","parse","Array","Object","error","parseType","string","type","value","test","slice","undefined","isNaN","Number","parseTemplate","template","delimiters","tokens","length","index","lastIndex","open","close","indexOf","push","substring","lastToken","trim","tinybind","prefix","_prefix","_fullPrefix","context","ev","binding","call","view","models","el","setAttribute","removeAttribute","options","keys","forEach","option","key","isObject","obj","message","Error","adapters","interfaces","rootInterface","Observer","keypath","callback","objectPath","getRootObject","target","realize","set","updateOptions","tokenize","root","current","i","path","chr","charAt","prototype","substr","pop","unreached","prev","token","get","splice","sync","next","oldValue","newValue","Function","setValue","active","action","unobserve","rootProp","$parent","getInputValue","results","checked","selected","FORMATTER_ARGS","FORMATTER_SPLIT","Binding","binder","args","formatters","formatterObservers","model","observe","parseTarget","observer","getIterationAlias","modelName","parseFormatterArguments","formatterIndex","map","ai","formattedValue","reduce","result","declaration","match","id","shift","formatter","processedArgs","read","eventHandler","fn","handler","function","routineFn","routine","publish","reduceRight","split","getValue","bind","hasOwnProperty","preloadData","unbind","fi","update","ComponentBinding","component","components","static","observers","upstreamObservers","bindingPrefix","len","attributes","attribute","name","propertyName","camelCase","stat","locals","replace","grouped","toUpperCase","bound","componentView","innerHTML","scope","initialize","_bound","extensionType","childNodes","upstream","textBinder","node","data","DECLARATION_SPLIT","parseNode","block","nodeType","templateDelimiters","text","document","createTextNode","parentNode","insertBefore","buildBinding","removeChild","traverse","bindingComparator","a","b","aPriority","priority","bPriority","trimStr","View","els","jquery","build","pipes","bindings","elements","sort","nodeName","bindInfos","starBinders","identifier","binders","k","fallbackBinder","attr","bindInfo","toLowerCase","publishes","ARRAY_METHODS","adapter","counter","defineProperty","weakmap","__rv","ref","callbacks","pointers","original","weakReference","response","apply","r","stubFunction","idx","cleanupWeakReference","desc","getOwnPropertyDescriptor","configurable","unobserveMutations","observeMutations","getString","toString","times","n","cb","createView","anchorEl","cloneNode","marker","removeEventListener","addEventListener","createComment","iterated","collection","isArray","indexProp","getAttribute","previous","nextSibling","matchIndex","nextView","nextIndex","elClass","className","textContent","style","display","disabled","self","isRadio","tagName","event","attached","nested","viewOptions","create","filter","init","createElement","negate","not"],"mappings":"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"}